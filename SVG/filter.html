<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>filter</title>
  <style>
    svg{border: 2px solid #000;}
  </style>
</head>
<body>

  <svg width="400" height="200" xmlns="http://www.w3.org/2000/svg">
    <!-- 1. 定义滤镜 -->
    <defs>
      <filter id="basicFilter" x="-20%" y="-20%" width="140%" height="140%">
        <!-- 滤镜原语1：高斯模糊（stdDeviation=模糊半径） -->
        <feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blur" />
        <!-- 滤镜原语2：阴影（基于模糊结果，dx/dy=偏移，stdDeviation=阴影模糊） -->
        <feDropShadow in="blur" dx="2" dy="2" stdDeviation="2" flood-opacity="0.5" flood-color="#333" />
        <!-- 滤镜原语3：叠加原始图形（避免模糊覆盖原内容） -->
        <feComposite in="SourceGraphic" in2="blur" operator="over" />
      </filter>
    </defs>

    <!-- 2. 目标元素引用滤镜 -->
    <rect x="50" y="50" width="300" height="100" fill="#3498db" filter="url(#basicFilter)" />
  </svg>


  <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <filter id="vintageFilter">
        <!-- 第一步：灰度化（颜色矩阵变换） -->
        <feColorMatrix 
          in="SourceGraphic" 
          type="matrix" 
          values="0.33 0.33 0.33 0 0
                  0.29 0.29 0.29 0 0
                  0.21 0.21 0.21 0 0
                  0    0    0    1 0" 
          result="gray" 
        />
        <!-- 第二步：添加暖色调（通道调整） -->
        <feComponentTransfer in="gray" result="warm">
          <feFuncR type="linear" slope="1.1" intercept="0.05" /> <!-- 增强红色通道 -->
          <feFuncG type="linear" slope="0.9" intercept="0.03" /> <!-- 减弱绿色通道 -->
          <feFuncB type="linear" slope="0.7" /> <!-- 减弱蓝色通道 -->
        </feComponentTransfer>
        <!-- 第三步：提高对比度（颜色矩阵） -->
        <feColorMatrix 
          in="warm" 
          type="saturate" 
          values="1.2" 
        />
      </filter>
    </defs>
    <image 
      xlink:href="https://picsum.photos/400/300" 
      width="400" height="300" 
      filter="url(#vintageFilter)" 
    />
  </svg>

  <svg width="500" height="200" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="glowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#45b7d1" />
        <stop offset="100%" stop-color="#9900ff" />
      </linearGradient>
      <filter id="glowFilter" x="-50%" y="-50%" width="200%" height="200%">
        <!-- 第一步：提取文本 Alpha 通道（仅保留轮廓） -->
        <feGaussianBlur in="SourceAlpha" stdDeviation="8" result="blur" />
        <!-- 第二步：为模糊轮廓添加渐变颜色（蓝→紫） -->
        <feColorMatrix 
          in="blur" 
          type="matrix" 
          values="0 0 0 0 0.2 
                  0 0 0 0 0.5 
                  0 0 0 0 1.0   
                  0 0 0 0.8 0"  
          result="glowColor" 
        />
        <!-- R 通道：0 + 0 + 0 + 0 + 0.2（基础蓝） -->
        <!-- G 通道：0 + 0 + 0 + 0 + 0.5（基础紫） -->
        <!-- B 通道：0 + 0 + 0 + 0 + 1.0（基础蓝紫） -->
        <!-- Alpha 通道：保留 80% 透明度 -->
        <!-- Alpha 通道：保留 80% 透明度 -->
        <!-- 第三步：叠加渐变发光（蓝→紫线性渐变） -->
        
        <feFlood flood-color="url(#glowGrad)" flood-opacity="0.6" result="flood" />
        <feComposite in="flood" in2="glowColor" operator="in" result="glow" />
        <!-- 第四步：叠加原始文本 -->
        <feBlend in="SourceGraphic" in2="glow" mode="over" />
      </filter>
      
    </defs>
    <text x="250" y="120" text-anchor="middle" font-size="48" font-weight="bold" fill="url(#glowGrad)" filter="url(#glowFilter)">
      渐变发光文本
    </text>
  </svg>

  <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <!-- 1. 定义位移图：正弦波路径（模拟波纹） -->
      <pattern id="displacePattern" width="100" height="20" patternUnits="userSpaceOnUse">
        <path d="M0,10 Q25,0 50,10 Q75,20 100,10" fill="none" stroke="black" stroke-width="20" />
      </pattern>
      <rect id="displaceMap" width="400" height="300" fill="url(#displacePattern)" />

      <!-- 2. 定义位移滤镜 -->
      <filter id="waveFilter" x="0" y="0" width="100%" height="100%">
        <!-- 位移图输入 -->
        <!-- 位移强度（值越大扭曲越明显） -->
        <!-- 用位移图的 R 通道控制 X 方向位移 -->
        <!-- 用位移图的 G 通道控制 Y 方向位移 -->
        <feDisplacementMap
          in="SourceGraphic"
          
          in2="url(#displaceMap)" 
          scale="10" 
          xChannelSelector="R" 
          yChannelSelector="G" 
        />
      </filter>
    </defs>
    <!-- 目标图片应用波纹滤镜 -->
    <image 
      xlink:href="https://picsum.photos/400/300" 
      width="400" height="300" 
      filter="url(#waveFilter)" 
    />
  </svg>
  
</body>
</html>