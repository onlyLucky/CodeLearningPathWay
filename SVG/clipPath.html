<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>clip path</title>
  <style>
    svg{border: 2px solid #000;}
  </style>
</head>
<body>
  <svg width="300" height="300" xmlns="http://www.w3.org/2000/svg">
    <!-- 1. 定义剪切路径 -->
    <defs>
      <clipPath id="circleClip">
        <!-- 剪切形状：圆形（仅显示图片与圆形重叠的部分） -->
        <circle cx="150" cy="150" r="120" />
      </clipPath>
    </defs>

    <!-- 2. 目标元素引用剪切路径（图片被裁剪为圆形） -->
    <image xlink:href="https://picsum.photos/300/300" width="300" height="300" clip-path="url(#circleClip)" />
  </svg>

  <svg width="400" height="200" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="relativeClip" clipPathUnits="objectBoundingBox">
        <!-- 剪切形状坐标用 0~1 范围（相对目标元素） -->
        <rect x="0.1" y="0.1" width="0.8" height="0.8" rx="0.05" /> <!-- 圆角矩形 -->
      </clipPath>
    </defs>
    <!-- 目标元素：矩形，剪切路径自动适配其大小 -->
    <rect x="50" y="50" width="300" height="100" fill="#3498db" clip-path="url(#relativeClip)" />
  </svg>

  <svg width="300" height="300" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="triangleClip">
        <!-- 路径指令：M=起点，L=线段，Z=闭合（三角形） -->
        <path d="M150,50 L250,250 L50,250 Z" />
      </clipPath>
    </defs>
    <image xlink:href="https://picsum.photos/300/300" width="300" height="300" clip-path="url(#triangleClip)" />
  </svg>

  <svg width="400" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
      <!-- 1. 定义圆形路径 -->
      <path id="circlePath" d="M200,80 A120,120 0 0,1 200,320 A120,120 0 0,1 200,80" fill="none" />
      <!-- 2. 定义路径文本剪切路径 -->
      <clipPath id="pathTextClip">
        <text font-size="24" font-weight="bold">
          <textPath xlink:href="#circlePath" startOffset="10%">沿曲线剪切文本</textPath>
        </text>
      </clipPath>
    </defs>
    <!-- 图片引用路径文本剪切 -->
    <image 
      xlink:href="https://picsum.photos/400/400" 
      width="400" height="400" 
      clip-path="url(#pathTextClip)" 
    />
  </svg>

  <svg width="300" height="300" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="animatedClip">
        <!-- 剪切形状：初始半径 80px，hover 时扩大到 150px -->
        <circle id="clipCircle" cx="150" cy="150" r="80" />
      </clipPath>
      <style>
        #clipCircle {transition: r 0.6s ease;}
        svg:hover #clipCircle {r: 150;}
      </style>
    </defs>
    <image xlink:href="https://picsum.photos/300/300" width="300" height="300" clip-path="url(#animatedClip)"/>
  </svg>

  <svg width="400" height="50" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="progressClip">
        <!-- 剪切路径：初始宽度 0，加载时增加宽度 -->
        <rect id="progressRect" x="0" y="0" width="0" height="50" />
      </clipPath>
    </defs>
    <!-- 目标元素：进度条背景 -->
    <rect width="400" height="50" fill="#eee" />
    <!-- 进度条前景（引用剪切路径） -->
    <rect width="400" height="50" fill="#3498db" clip-path="url(#progressClip)" />
    <!-- 进度文本 -->
    <text x="200" y="30" text-anchor="middle" fill="#333" font-size="18" id="progressText">0%</text>

    <script>
      const progressRect = document.getElementById('progressRect');
      const progressText = document.getElementById('progressText');
      let progress = 0;

      // 模拟加载进度
      const timer = setInterval(() => {
        progress += 1;
        progressRect.setAttribute('width', `${progress * 4}px`); // 400px * 进度%
        progressText.textContent = `${progress}%`;
        if (progress >= 100) clearInterval(timer);
      }, 50);
    </script>
  </svg>

  <svg width="300" height="300" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <!-- 剪切1：圆形 -->
      <clipPath id="clipMul">
        <circle cx="150" cy="150" r="120" />
        <rect x="50" y="50" width="200" height="200" />
      </clipPath>
    </defs>
    <image 
      xlink:href="https://picsum.photos/300/300" 
      width="300" height="300" 
      clip-path="url(#clipMul)" 
    />
  </svg>


  <svg width="300" height="300" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <!-- 1. 剪切路径：圆形 -->
      <clipPath id="circleClip">
        <circle cx="150" cy="150" r="120" />
      </clipPath>
      <!-- 2. 阴影滤镜 -->
      <filter id="shadowFilter" x="-20%" y="-20%" width="140%" height="140%">
        <feDropShadow dx="3" dy="3" stdDeviation="5" flood-opacity="0.5" flood-color="#333" />
      </filter>
    </defs>
    <!-- 图片：先裁剪，再添加阴影 -->
    <image 
      xlink:href="https://picsum.photos/300/300" 
      width="300" height="300" 
      clip-path="url(#circleClip)" 
      filter="url(#shadowFilter)" 
    />
  </svg>

  <svg width="300" height="300" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <clipPath id="nestedClip" clip-rule="evenodd">
        <!-- 外层矩形，内层圆形（evenodd 规则：内层隐藏） -->
        <rect x="50" y="50" width="200" height="200" />
        <circle cx="150" cy="150" r="120" />
        <rect x="10" y="10" width="200" height="200" />
      </clipPath>
    </defs>
    <image 
      xlink:href="https://picsum.photos/300/300" 
      width="300" height="300" 
      clip-path="url(#nestedClip)" 
    />
  </svg>
</body>
</html>