<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scroll Progress</title>
  <script src="../assets/libs/gsap3.13.0/gsap.min.js"></script>
  <script src="../assets/libs/gsap3.13.0/ScrollTrigger.min.js"></script>
  <style>
    * {
      padding: 0;
      margin: 0;
    }
    body{
      background-color: #232529;
    }
    .spacer{
      height: 100vh;
    }
    main{
      width: 100%;
      height: 200vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #trigger-container{
      position: relative;
      display: block;
      border-top: dashed 2px grey;
      border-bottom: dashed 2px grey;
      padding: 4rem;
    }
    #windmill{
      width: 100%;
      height: 100%;
    }
    .info{
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      width: 300px;
      background-color: #191919;
      border-radius: 10px;
      height: 46px;
      gap: 1rem;
    }
    .info h1{
      font-size: 1.2rem;
      text-align: center;
      color: #fffce1;
    }
    .info h1 #text{
      display: inline-block;
      width: 200px;
    }
    #arrow{
      height: 20px;
    }
  </style>
</head>
<body>
  <div class="spacer"></div>
  <main>
    <div id="trigger-container">
      <svg id="windmill" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" viewBox="0 0 248 248" aria-hidden="true">
        <path fill="url(#paint0_linear_2452_11835)" d="M152.266 123.716h94.275c.802 0 1.459.656 1.459 1.459v121.067c0 .81-.664 1.474-1.474 1.466-67.274-.78-121.669-55.137-122.522-122.387v121.22c0 .803-.657 1.459-1.46 1.459H1.474c-.81 0-1.474-.664-1.467-1.474C.795 178.721 56 124.008 123.996 124H1.459C.657 124 0 123.344 0 122.541V1.474C0 .664.664 0 1.474.008c67.274.78 121.669 55.137 122.522 122.387V1.46c0-.803.657-1.46 1.46-1.46h121.07c.81 0 1.474.664 1.467 1.474-.679 58.224-41.486 106.801-96.055 119.367-1.686.386-1.401 2.875.336 2.875h-.008Z"></path>
        <path fill-opacity="0.6" fill="url(#pattern-scroll-trigger-pin-windmill-0)" d="M152.266 123.716h94.275c.802 0 1.459.656 1.459 1.459v121.067c0 .81-.664 1.474-1.474 1.466-67.274-.78-121.669-55.137-122.522-122.387v121.22c0 .803-.657 1.459-1.46 1.459H1.474c-.81 0-1.474-.664-1.467-1.474C.795 178.721 56 124.008 123.996 124H1.459C.657 124 0 123.344 0 122.541V1.474C0 .664.664 0 1.474.008c67.274.78 121.669 55.137 122.522 122.387V1.46c0-.803.657-1.46 1.46-1.46h121.07c.81 0 1.474.664 1.467 1.474-.679 58.224-41.486 106.801-96.055 119.367-1.686.386-1.401 2.875.336 2.875h-.008Z" style="mix-blend-mode:multiply"></path>
        <path fill="url(#paint1_linear_2452_11835)" d="M152.266 123.716h94.275c.802 0 1.459.656 1.459 1.459v121.067c0 .81-.664 1.474-1.474 1.466-67.274-.78-121.669-55.137-122.522-122.387v121.22c0 .803-.657 1.459-1.46 1.459H1.474c-.81 0-1.474-.664-1.467-1.474C.795 178.721 56 124.008 123.996 124H1.459C.657 124 0 123.344 0 122.541V1.474C0 .664.664 0 1.474.008c67.274.78 121.669 55.137 122.522 122.387V1.46c0-.803.657-1.46 1.46-1.46h121.07c.81 0 1.474.664 1.467 1.474-.679 58.224-41.486 106.801-96.055 119.367-1.686.386-1.401 2.875.336 2.875h-.008Z"></path>
        <path fill-opacity="0.6" fill="url(#pattern-scroll-trigger-pin-windmill-0)" d="M152.266 123.716h94.275c.802 0 1.459.656 1.459 1.459v121.067c0 .81-.664 1.474-1.474 1.466-67.274-.78-121.669-55.137-122.522-122.387v121.22c0 .803-.657 1.459-1.46 1.459H1.474c-.81 0-1.474-.664-1.467-1.474C.795 178.721 56 124.008 123.996 124H1.459C.657 124 0 123.344 0 122.541V1.474C0 .664.664 0 1.474.008c67.274.78 121.669 55.137 122.522 122.387V1.46c0-.803.657-1.46 1.46-1.46h121.07c.81 0 1.474.664 1.467 1.474-.679 58.224-41.486 106.801-96.055 119.367-1.686.386-1.401 2.875.336 2.875h-.008Z" style="mix-blend-mode:multiply"></path>
        <defs>
          <linearGradient id="paint0_linear_2452_11835" x1="218" x2="-47.283" y1="258" y2="153.706" gradientUnits="userSpaceOnUse">
            <stop offset=".27" stop-color="#FFD3FD"></stop>
            <stop offset=".838" stop-color="#806EFF"></stop>
          </linearGradient>
          <linearGradient id="paint1_linear_2452_11835" x1="-21.183" x2="223.712" y1="-7.807" y2="329.472" gradientUnits="userSpaceOnUse">
            <stop offset=".27" stop-color="#FEC5FB"></stop>
            <stop offset=".838" stop-color="#00BAE2"></stop>
          </linearGradient>
          <pattern id="pattern-scroll-trigger-pin-windmill-0" width=".403" height=".403" patternContentUnits="objectBoundingBox">
            <use xlink:href="#svg-noise" transform="scale(.0008)"></use>
          </pattern>
        </defs>
      </svg>
    </div>
  </main>
  <div class="spacer"></div>
  <div class="info">
    <h1><span id="text">Scroll down</span></h1>
    <svg id="arrow" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 11" aria-hidden="true">
      <path fill="#fffce1" d="M4.055 0v7.71l-3-3L0 5.79l4.805 4.804 4.804-4.805-1.054-1.078-3 3V0h-1.5Z"></path>
    </svg>
  </div>
  <script>
    // 创建一个 GSAP 时间轴对象，并配置 ScrollTrigger 插件
    const tl = gsap
      .timeline({
        scrollTrigger: {
          trigger: "#trigger-container", // 触发滚动触发器的元素
          start: "top center", // 触发开始的位置，当元素顶部到达视口中心时
          end: "bottom center", // 触发结束的位置，当元素底部到达视口中心时
          markers: true, // 显示标记，用于调试
          scrub: true, // 启用 scrub 模式，动画会根据滚动位置平滑过渡
          onUpdate: (self) => { // 每次滚动触发器更新时调用的回调函数
            text.innerText = `progress ${self.progress.toFixed(2)}` // 更新文本内容，显示当前的进度
          }
        }
      })
      .to(
        "#windmill", // 目标元素
        {
          rotation: 360, // 旋转 360 度
          ease: "none", // 不使用缓动函数
          duration: 4 // 动画持续时间，单位为秒
        }
      );
    // 改变导航栏中的箭头方向
    let inZone = false; // 标记是否在滚动区域
    ScrollTrigger.create({
      start: 0, // 滚动触发器的开始位置
      end: "max", // 滚动触发器的结束位置
      onUpdate: (self) => { // 每次滚动触发器更新时调用的回调函数
        if (self.direction !== self.prevDirection && !inZone) { // 如果方向改变且不在滚动区域
          gsap.to("#arrow", { // 对箭头元素进行动画操作
            rotation: self.direction === 1 ? 0 : -180, // 根据滚动方向旋转箭头
            duration: 0.2 // 动画持续时间，单位为秒
          });
          self.prevDirection = self.direction; // 更新前一个方向
        }
      }
    });
  </script>
</body>
</html>