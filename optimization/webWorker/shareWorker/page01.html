<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>page01</title>
</head>
<body>
  <h1>共享计数器：<span id="count">0</span></h1>
  <button onclick="increment()">+1</button>

  <script>
    const worker = new SharedWorker('shareWorker.js');
    const port = worker.port;
    port.start();

    // 接收计数更新
    port.onmessage = (msg) => {
      if (msg.data.type === 'count') {
        document.getElementById('count').textContent = msg.data.data;
      }
    };

    // 发送+1请求
    function increment() {
      port.postMessage({ type: 'increment' });
    }
  </script>
</body>
</html>